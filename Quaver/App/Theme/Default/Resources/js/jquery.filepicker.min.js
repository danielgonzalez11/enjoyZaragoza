+function(a,b){function h(a){var b=/\/([^\\\/:*?\"<>|]+)$/i.exec(a);return b?b[1]:null}function i(a){var b=/\.([0-9a-z]+)(?:[\?#]|$)/i.exec(a);return b?b[1]:null}function j(b,e){function s(){var a=!0;if("function"==typeof e.renderUI){var c=e.renderUI.call(this,b,q,o,m);"undefined"!=typeof c&&(a=c)}a&&k.render(b,r.ui,{button:q,input:o,preview:m})}function u(){var b=a(j).map(function(){return this.name}).get();a(o).prop("value",b.join(", "))}function v(){var b=this;l.html(""),a(j).each(function(){if(this.type.match("image.*")){var c=a('<img src="'+this.src+'" title="'+this.name+'" style="max-width: 100%; height: auto"/>');l.append(c);var d=!0;if("function"==typeof e.renderThumbnail){var f=e.renderThumbnail.call(b,c[0],this);"undefined"!=typeof f&&(d=f)}d&&k.render(c.get(0),r.thumbnail,this)}})}function w(){f.css({position:"absolute",visibility:"hidden"}),"function"==typeof e.resize&&e.resize.call(this)}function x(a){j=a.target.files;for(var c,b=0;c=j[b];b++)if(c.type.match("image.*")){var d=new FileReader;d.onload=function(a){return function(b){a.src=b.target.result,v()}}(c),d.readAsDataURL(c)}"function"==typeof e.change&&e.change.call(this,j),u.call(g)}function y(){return"right"==a("<div></div>").addClass("pull-right").css("float")}function z(){return a("<div></div>").addClass("ui-front").css("z-index")>1}function A(){var b=f.attr("value"),c=b?b.split(","):[];j=a(c).map(function(){var b=h(this),c=i(this),d="";return a.inArray(c,["jpg","jpeg","png","gif"])>=0&&(d="image/"+c),{name:b,type:d,src:this}}).get(),s.call(this),v.call(this),w.call(this),u.call(this)}var f=a(b),g=this,j=[],k=new c,l=a("<div></div>"),m=l.get(0),n=a("<input/>"),o=n.get(0),p=a('<button type="button"></button>'),q=p.get(0),r="string"==typeof e.style?a.fn.filepicker.getStyle("auto"==e.style?y()?"bootstrap":z()?"jquery-ui":"default":e.style):e.style;d.on("resize",function(){w.call(g)}),f.on("change",function(a){x(a)}),p.on("click",function(){f.trigger("click")}),n.on("click",function(){f.trigger("click")}).on("focus",function(){a(this).blur()}),A.call(this)}var c=function(){function F(a,b,c){c=c||{};var d=Q(b);for(var e in d){var f=d[e];f[o]?f[x](z,e):null}for(var k,g=E(a,b,c),h=N(g),i=h[A]("*["+z+"]"),i=h.querySelectorAll("*["+z+"]"),j=0;k=i[j];j++){var l=k.getAttribute(z),f=d[l];if(f)if(f[o]){for(var n,m=0;n=k[q][m];m++)f[x](n.nodeName,n.nodeValue);if(!f[r].length)for(var t=0,v=k[r];t<v.length;t++)f[u](v[t--]);k[s][w](f,k)}else if("object"!=typeof elem){var y=f;f=k,f[p]=y}}for(var e in d){var f=d[e];f[o]?f.removeAttribute(z):null}return h}function H(a,b,d){var g=null,d=d||{};if("string"==typeof b)g=F(b,d,{helpers:G});else if(b instanceof Array){g=a=a||c[B]();for(var i,h=0;i=b[h];h++)a[u](H.call(this,null,i,d))}else if("object"==typeof b){var j=a||b[n];g=function(){if("string"==typeof j){var a=F(j,d,{helpers:G,tokens:C})[r];if(1==a.length&&1==a[0][o])return a[0];throw"property 'element' must evaluate to a single dom element"}return"object"==typeof j&&j[o]?j:null}()||c[y](b.nodeName||b.tagName||e),a=g;var k=b[f];for(var l in b[q])a[x](M(l),E(b[q][l],d));b[r]&&H.call(this,a,b[r],d),O(a,b,d),k&&(g=a=P(a,H.call(this,null,k,d)))}return g}function J(a){for(var c,b=0;c=I[b];b++)if(c[n]==a){I.splice(b--,1);for(var e,d=0;e=c.markup[d];d++)e[s][w](a,e);break}}function K(a,b,c){c=c||{},J.call(this,a);var d=a.cloneNode(),e=a[s],f=d;e?e[v](d,a):null;var h=b[r];"object"!=typeof b||b instanceof Array||h&&1!=h.length||(b[n]=a),c[n]=c[n]||a;for(var m,i=H.call(this,null,b,c),j=[],k=i[r],l=0;m=k[l];l++)j[g](m);return I[g]({element:a,markup:j}),f&&f[s][w](i,f),i}function L(){}function M(a){return a[m](/\W+/g,"-")[m](/([a-z\d])([A-Z])/g,"$1-$2")}function N(a){if("string"!=typeof a)return a;var b,d=c[y](e),f=c[B]();for(d[p]=a;b=d[t];)f[u](b);return f}function O(a,b,c){for(var d in b)if(!([n,q,i,r,f].indexOf(d)+1)){var e=b[d];typeof e!=k||e[o]?a[d]=typeof e==l?E(e,c,{helpers:G,tokens:e.indexOf(D.start)>=0?D:C}):e:arguments.callee(a[d]||{},e,c)}return a}function P(a,b){if(!b)return a;var c=a[s],d=a.nextSibling;return b=11===b[o]?b[t]:b,b[u](a),c&&c[v](b,d),b}function Q(a,b,c){b=b||"",c=c||{};for(var d in a){var e=a[d],f=b?b+"["+d+"]":d;"undefined"!=typeof e&&null!=e&&(c[f]=e,typeof e!=k||e.outerHTML||Q(e,f,c))}return c}var c=document,d=b,e="div",f="wrap",g="push",h="join",i="data",j="split",k="object",l="string",m="replace",n="element",o="nodeType",p="innerHTML",q="attributes",r="childNodes",s="parentNode",t="firstChild",u="appendChild",v="insertBefore",w="replaceChild",x="setAttribute",y="createElement",z="data-variable",A="querySelectorAll",B="createDocumentFragment",C={start:"#{",end:"}",buffer:""},D={start:"<%",end:"%>",buffer:"="},E=function(){var a={};return function(b,c,d){d=d||{};for(var e in G)c["_"+e]=function(a,b){return function(){a._data=b;var c=a.apply(this,arguments);return delete a._data,c}}(G[e],c);var f=d.tokens||D,g=a[b]=a[b]||new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b[m](/[\r\t\n]/g," ")[j](f.start)[h](" ")[m](new RegExp("\\(\\(\\^\\|"+f.end+"\\)\\[\\^  \\]\\*\\)","g"),"$1\r")[m](new RegExp(" "+f.buffer+"(.*?)"+f.end,"g"),"',$1,'")[j]("  ")[h]("');")[j](f.end)[h]("p.push('")[j]("\r")[h]("\\'")+"');} p = p.filter(function(v) {return typeof v == 'string' ? v.replace(/^s+|s+$/g, '').length : true});for (var i = 0; i < p.length; i++) { var o = p[i]; if (o && o.outerHTML) p[i] = o.outerHTML; }return p.length > 1 ? p.join('') : typeof p[0] == 'undefined' ? '' : p[0];"),i=c?g(c):g;for(var e in G)delete c["_"+e];return i}}(),G={build:function(){return H.call(this,arguments[0],arguments[1],arguments.callee._data)}},I=[];return L.prototype={render:function(a,b,d){for(var g,e=typeof a==l?c[A](a):a instanceof Array?a:[a],f=0;g=e[f];f++)K.call(this,g,b,d);return e},clean:function(a){J.call(this,a)},helpers:G},(a=jQuery)&&(a.fn.render=a.fn.render||function(b,c){return this.each(function(){return d.mugine.render(this,b,c),a(this)})}),d.Mugine=d.Mugine||L,d.mugine=d.mugine||new L,L}(),d=a(b),e="filepicker",f={style:"auto",renderUI:null,renderThumbnail:null},k=j;a.fn[e]=function(b){return b=a.extend({},f,b),this.each(function(){return a(this).data(e)||a(this).data(e,new k(this,b)),a(this)})};var l={"default":{ui:[{element:"#{ preview }",className:"filepicker-preview"},{className:"filepicker-ui",childNodes:[{element:"#{ button }",innerHTML:'<%= element.getAttribute("data-label") %>'},{element:"#{ input }"}]},{element:"#{ element }"}],thumbnail:{wrap:'<div style="margin-bottom: 20px; text-align: center; border-radius: 5px"></div>',style:"max-width: 100%"}},bootstrap:{ui:[{element:"#{ preview }"},{className:"input-group",childNodes:[{element:"#{ button }",className:"btn",wrap:'<div class="input-group-btn"></div>',innerHTML:'<i class="glyphicon glyphicon-upload"></i> <%= element.getAttribute("data-label") %>'},{element:"#{ input }",className:"form-control",placeholder:"#{ element.placeholder }"}]},{element:"#{ element }"}],thumbnail:{wrap:'<div class="thumbnail"></div>'}},"jquery-ui":{ui:[{element:"#{ preview }"},{className:"ui-buttonset",childNodes:[{element:"#{ button }",className:'ui-button ui-state-default ui-corner-left <% if (!element.getAttribute("data-label")) { %> ui-button-icon-only<% } else { %> ui-button-text-icon-primary<% } %>',innerHTML:'<span class="ui-button-icon-primary ui-icon  ui-icon-document"></span><span class="ui-button-text"><%= element.getAttribute("data-label") || "&nbsp;" %></span>'},{element:"#{ input }",className:"ui-button ui-state-default ui-corner-right",placeholder:"#{ element.placeholder }"},{element:"#{ element }"}]}],thumbnail:{wrap:'<div style="padding: 5px; margin-bottom: 20px; text-align: center" class="ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>',style:{maxWidth:"100%"}}}};a.fn[e].registerStyle=function(a,b){l[a]=b},a.fn[e].getStyle=function(a){return l[a]}}(jQuery,window);